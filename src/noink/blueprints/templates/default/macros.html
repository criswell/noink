{% macro nomacro_entryURL(entry) -%}
  {% if entry.url is not none -%}
    /{{ entry.url }}
  {%- else -%}
    /node/{{ entry.id }}
 {%- endif %}
{%- endmacro %}

{% macro nomacro_tagURL(tag) -%}
  /tag/{{tag.id}}
{%- endmacro %}

{% macro nomacro_placeholder(entry, attr, default) -%}
  {% if entry is defined -%}
    {% if entry is none -%}
      placeholder="{{ default }}"
    {%- elif entry[attr] is none -%}
      placeholder="{{ default }}"
    {%- else -%}
      value="{{ entry[attr] }}"
    {%- endif %}
  {%- else -%}
    placeholder="{{ default }}"
  {%- endif %}
{%- endmacro %}

{% macro nomacro_flipper(flipper_id, text, obj) -%}
<div class="accordian" id="{{ flipper_id }}">
    <div class="accordian-group">
      <div class="accordian-heading">
        <a class="accordian-toggle" data-toggle="collapse"
        data-present="#{{ flipper_id }}"
        href="#{{ flipper_id}}One">{{ text|safe }}</a>
      </div>
      <div id="{{ flipper_id}}One"
        {% if obj is defined -%}
          class="accordian-body collapse in"
        {%- else -%}
          class="accordian-body collapse"
        {%- endif %}
        >
        <div class="accordian-inner">
          {{ caller() }}
        </div>
      </div>
    </div>
</div>
{%- endmacro %}

{% macro nomacro_tagdisplay(tags) -%}
  {% if tags is defined -%}
    {% for tm in tags -%}
      {{ tm }},
    {%- endfor %}
  {%- endif %}
{%- endmacro %}

{% macro nomacro_checkbox(entry, attr, default) -%}
  {% if entry is defined -%}
    {% if entry[attr] -%}
      checked
    {%- endif %}
  {%- endif %}
{%- endmacro %}

{% macro nomacro_roledisplay_group(g, roles_by_group) -%}
  <div class="panel panel-default">
    <div class="panel-heading">Group: "{{ g.name }}"</div>
      <div class="panel-body">
        <div class='col-sm-5'>
        <div class='input-group'>
          <!-- {{ roles_by_group|safe }} -->
          <!-- {{ g.id }} -->
          {% for r in roles_by_group[g.id] -%}
            <div class='col-lg-6'>
              <div class='input-group'>
                <input type="text" class="form-control" id="disabledInput" placeholder="{{ r.role.name }}" disabled>
                <span class="input-group-btn">
                  <button class="btn btn-default" name='delete' type='submit'><span class='glyphicon glyphicon-minus-sign'></span></button>
                </span>
              </div>
            </div>
          {%- endfor %}
        </div>
      </div>
    </div>
  </div>
{%- endmacro %}

{% macro nomacro_roledisplay(roles_by_group, avail_roles, avail_groups, groups) -%}
  <div class='form-group'>
    <div class='col-sm-2 control-label'><h3>Roles</h3></div>
    <div class='col-lg-10'>
      {% for g in groups -%}
        {{ nomacro_roledisplay_group(g, roles_by_group) }}
      {%- endfor %}
      {% for g in avail_groups -%}
        {{ nomacro_roledisplay_group(g, roles_by_group) }}
      {%- endfor %}
    </div>
  </div>
{%- endmacro %}

